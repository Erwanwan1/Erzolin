{"remainingRequest":"C:\\Users\\erwan\\OneDrive\\Bureau\\Cours Jeremy\\Java jeremy\\Syst-me-d-information-web\\application-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\erwan\\OneDrive\\Bureau\\Cours Jeremy\\Java jeremy\\Syst-me-d-information-web\\application-vue\\src\\views\\Profil.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\erwan\\OneDrive\\Bureau\\Cours Jeremy\\Java jeremy\\Syst-me-d-information-web\\application-vue\\src\\views\\Profil.vue","mtime":1624363519839},{"path":"C:\\Users\\erwan\\OneDrive\\Bureau\\Cours Jeremy\\Java jeremy\\Syst-me-d-information-web\\application-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\erwan\\OneDrive\\Bureau\\Cours Jeremy\\Java jeremy\\Syst-me-d-information-web\\application-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\erwan\\OneDrive\\Bureau\\Cours Jeremy\\Java jeremy\\Syst-me-d-information-web\\application-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\erwan\\OneDrive\\Bureau\\Cours Jeremy\\Java jeremy\\Syst-me-d-information-web\\application-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY3VzdG9tSGVhZGVyIGZyb20gJy4uL2NvbXBvbmVudHMvQ3VzdG9tSGVhZGVyLnZ1ZScNCmltcG9ydCBjdXN0b21Mb2dpbiBmcm9tICcuLi9jb21wb25lbnRzL0N1c3RvbUxvZ2luLnZ1ZScNCg0KdGhpcy51c2UoVmVlVmFsaWRhdGUpDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1Byb2ZpbCcsDQoNCiAgY29tcG9uZW50czogew0KICAgIGN1c3RvbUhlYWRlciwNCiAgICBjdXN0b21Mb2dpbg0KICB9LA0KICAkX3ZlZVZhbGlkYXRlOiB7DQogICAgdmFsaWRhdG9yOiAnbmV3Jw0KICB9LA0KICBkYXRhOiAoKSA9PiAoew0KICAgIHBhc3N3b3JkOiAnJywNCiAgICBjb25maXJtUGFzc3dvcmQ6ICcnLA0KICAgIHNob3cxOiBmYWxzZSwNCiAgICBzaG93MjogZmFsc2UsDQogICAgYWxlcnQ6IGZhbHNlLA0KICAgIHJ1bGVzOiB7DQogICAgICByZXF1aXJlZDogdmFsdWUgPT4gISF2YWx1ZSB8fCAnUmVxdWlyZWQuJywNCiAgICAgIG1pbjogdiA9PiB2Lmxlbmd0aCA+PSA4IHx8ICdNaW4gOCBjaGFyYWN0ZXJzJywNCiAgICAgIGVtYWlsTWF0Y2g6ICgpID0+ICgnTGVzIG1vdHMgZGUgcGFzc2VzIHNvbnQgZGlmZsOpcmVudHMnKQ0KICAgIH0NCiAgfSksDQoNCiAgbWV0aG9kczogew0KICAgIGdldFV0aWxpc2F0ZXVyICgpIHsNCiAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Byb2ZpbC8nICsgdGhpcy4kc3RvcmUuc3RhdGUudXRpbGlzYXRldXIudXRpSWQuaWQsDQogICAgICAgIHsNCiAgICAgICAgICBtZXRob2Q6ICdHRVQnLA0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgICB9DQogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQ0KICAgICAgICAudGhlbihkYXRhID0+ICh0aGlzLnV0aWxpc2F0ZXVyID0gZGF0YSkpDQogICAgfSwNCiAgICB2YWxpZGF0ZSAoKSB7DQogICAgICB0aGlzLiR2YWxpZGF0b3IudmFsaWRhdGVBbGwoKQ0KICAgICAgICAudGhlbihyZXN1bHQgPT4gew0KICAgICAgICAgIHRoaXMuY29uZmlybSgpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBjb25maXJtICgpIHsNCiAgICAgIHRoaXMuYWxlcnQgPSBmYWxzZQ0KICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcHJvZmlsLycsDQogICAgICAgIHsNCiAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgICAgfSwNCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7DQogICAgICAgICAgICBpZDogdGhpcy4kc3RvcmUuc3RhdGUudXRpbGlzYXRldXIudXRpSWQuaWQsDQogICAgICAgICAgICBlbWFpbDogdGhpcy4kc3RvcmUuc3RhdGUudXRpbGlzYXRldXIudXRpSWQuZW1haWwsDQogICAgICAgICAgICBtZHA6IHRoaXMucGFzc3dvcmQNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICApDQogICAgICB0aGlzLmFsZXJ0ID0gdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQogICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmlzQ29ubmVjdGVkKSB7DQogICAgICB0aGlzLmdldFV0aWxpc2F0ZXVyKCkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Profil.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profil.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-app>\r\n    <customLogin v-if=\"!$store.state.isConnected\"></customLogin>\r\n    <div v-else>\r\n      <customHeader title='Profil'></customHeader>\r\n      <v-container>\r\n        <v-card>\r\n          <v-alert\r\n          :value=\"alert\"\r\n          type=\"success\"\r\n          dismissible\r\n          transition=\"scale-transition\"\r\n        >\r\n          L'utilisateur a été modifié avec succès !\r\n        </v-alert>\r\n          <v-row\r\n          justify=\"center\"\r\n          >\r\n            <v-col\r\n            cols=\"12\"\r\n            sm=\"10\"\r\n            md=\"8\"\r\n            lg=\"6\"\r\n            >\r\n              <v-text-field\r\n              label=\"Email\"\r\n              outlined\r\n              color=\"#cf2084\"\r\n              v-model=\"$store.state.utilisateur.utiId.email\"\r\n              ></v-text-field>\r\n              <v-text-field\r\n                v-model=\"password\"\r\n                :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                :rules=\"[rules.required, rules.min]\"\r\n                :type=\"show1 ? 'text' : 'password'\"\r\n                v-validate=\"'required'\"\r\n                :error-messages=\"errors.collect('password')\"\r\n                name=\"input-10-1\"\r\n                label=\"Nouveau mot de passe\"\r\n                data-vv-name=\"password\"\r\n                hint=\"Au moins 8 caracteres\"\r\n                color=\"#cf2084\"\r\n                counter\r\n                @click:append=\"show1 = !show1\"\r\n              ></v-text-field>\r\n              <v-text-field\r\n                v-model=\"confirmPassword\"\r\n                :append-icon=\"show2 ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                :rules=\"[rules.required, rules.min]\"\r\n                :type=\"show2 ? 'text' : 'password'\"\r\n                v-validate=\"'required|confirmed:password'\"\r\n                :error-messages=\"errors.collect('confirmPassword')\"\r\n                name=\"input-10-1\"\r\n                label=\"Comfirmation du mot de passe\"\r\n                data-vv-name=\"confirmPassword\"\r\n                hint=\"Au moins 8 caracteres\"\r\n                color=\"#cf2084\"\r\n                counter\r\n                @click:append=\"show2 = !show2\"\r\n              ></v-text-field>\r\n              <v-btn\r\n              color=\"#cf2084\"\r\n              dark\r\n              class=\"mb-2\"\r\n              @click=\"validate()\"\r\n              >\r\n                Confirmer\r\n              </v-btn>\r\n            </v-col>\r\n          </v-row>\r\n        </v-card>\r\n      </v-container>\r\n    </div>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport customHeader from '../components/CustomHeader.vue'\r\nimport customLogin from '../components/CustomLogin.vue'\r\n\r\nthis.use(VeeValidate)\r\n\r\nexport default {\r\n  name: 'Profil',\r\n\r\n  components: {\r\n    customHeader,\r\n    customLogin\r\n  },\r\n  $_veeValidate: {\r\n    validator: 'new'\r\n  },\r\n  data: () => ({\r\n    password: '',\r\n    confirmPassword: '',\r\n    show1: false,\r\n    show2: false,\r\n    alert: false,\r\n    rules: {\r\n      required: value => !!value || 'Required.',\r\n      min: v => v.length >= 8 || 'Min 8 characters',\r\n      emailMatch: () => ('Les mots de passes sont différents')\r\n    }\r\n  }),\r\n\r\n  methods: {\r\n    getUtilisateur () {\r\n      fetch('http://localhost:8080/api/profil/' + this.$store.state.utilisateur.utiId.id,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }).then(response => response.json())\r\n        .then(data => (this.utilisateur = data))\r\n    },\r\n    validate () {\r\n      this.$validator.validateAll()\r\n        .then(result => {\r\n          this.confirm()\r\n        })\r\n    },\r\n    confirm () {\r\n      this.alert = false\r\n      fetch('http://localhost:8080/api/profil/',\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            id: this.$store.state.utilisateur.utiId.id,\r\n            email: this.$store.state.utilisateur.utiId.email,\r\n            mdp: this.password\r\n          })\r\n        }\r\n      )\r\n      this.alert = true\r\n    }\r\n  },\r\n  mounted () {\r\n    if (this.$store.state.isConnected) {\r\n      this.getUtilisateur()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}